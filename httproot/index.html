<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test</title>
    <script src="https://cdn.jsdelivr.net/npm/animejs/lib/anime.iife.min.js"></script>
    <link rel="stylesheet" href="/css/styles.css" />
</head>
<body>
    <div id="game">
        <div class="fullscreen center-children">
            <img id="spinner" src="/img/spinner.png" alt="spinner" onclick="spin(this)">
        </div>
        <div class="fullscreen horizontal-layout">
            <div id="card-1" class="card disabled" onclick="selectCard(this)">1</div>
            <div id="card-2" class="card disabled" onclick="selectCard(this)">2</div>
            <div id="card-3" class="card disabled" onclick="selectCard(this)">3</div>
        </div>
        <div class="fullscreen">
            <button onclick="restart()">Replay</button>
        </div>
    </div>

    <script>
        const { animate, utils } = anime;
        let rotations = 0;
        function spin(element) {
            rotations += (1 + 2 * Math.random());
            $spinner = utils.$('#spinner');
            animate($spinner, {
                rotate: rotations * 360,
                ease: 'out(4)',
                duration: 1500,
                
            }).then(() => {
                utils.$('.card').forEach(e => e.classList.remove('disabled'));
            });
        }

        function selectCard(card) {
            utils.$('.card').forEach(e => {
                if (e !== card) {
                    e.classList.add('disabled');
                }
            });
            const parent = card.parentNode;
            if (card == parent.children[0]) {
                parent.insertBefore(card, parent.children[2]);
            } else if (card == parent.children[2]) {
                parent.insertBefore(card, parent.children[1]);
            }
        }

        function restart() {
            location.reload();
        }
    </script>
</body>
</html>